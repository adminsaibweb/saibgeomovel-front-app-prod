import{I as fe,L as a,N as e,a6 as Mt,a7 as te,a8 as Ke,P as pe,O as je,a9 as $e,J as Bt,K as Vt,U as be,aa as Ft,a1 as Ne,Z as V,ab as zt,X as Ht,a2 as xe,S as K,ac as ee,V as ke,R as Ut,a3 as Gt}from"./index-YngUMXNg.js";import{u as qe}from"./index.esm-D6X6kllX.js";import{u as Wt,F as Kt}from"./useForcedBreak-AE-Klfdy.js";import{D as Je,a as Qe,b as $t,c as qt}from"./dialog-BOt40gKF.js";import{F as Ye,a as Ze,b as Xe,c as et,d as tt,e as ot}from"./form-BaVjm44W.js";import{P as H,u as Le,c as Jt,a as Oe,b as M,d as se}from"./index-BFQh2s5u.js";import{u as Qt,c as Yt}from"./index-CIrkQXJj.js";import{c as nt,R as Zt,A as Xt,P as eo,u as to,h as oo,a as no,b as so,F as ro,D as ao,C as io,d as lo}from"./index-uC_SKFd_.js";import{u as co,M as Me}from"./index-Bdkf9Pq7.js";import{C as st}from"./chevron-down-DOs2cYKc.js";import{C as uo}from"./check-FgXnpPwD.js";import{C as po}from"./chevron-up-CqDRigrW.js";import{C as Be,b as Ve,g as ue,c as fo,d as mo,f as ho,i as xo,e as go,j as Fe,s as vo}from"./homeServices-CpeKEX-f.js";import{f as ze}from"./currency-CxFzcO-j.js";import{d as So,b as He,f as Ue}from"./timesAndDates-DyUV-en1.js";import{u as wo}from"./useLocalStorage-DOVSTlkF.js";import{C as yo}from"./clock-DtKml6_n.js";import{S as Io}from"./store-NJ4uit83.js";import{f as Ge}from"./format-BBYAYFtJ.js";import"./timer--7ll23NN.js";import"./index-DJgVxpi-.js";import"./label-CWpU4h0C.js";import"./apiEndpoints-aSQtSIWE.js";import"./handleApiError-B5XCkBcY.js";import"./useQuery-PaZTN53n.js";import"./addDays-CyOWDzeI.js";import"./startOfDay-Be0wd0F5.js";import"./pt-BR-mIVN-mbg.js";const Co=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],bo=fe("circle-pause",Co);const No=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],jo=fe("cloud-upload",No);const Ao=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Eo=fe("loader",Ao);const To=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_o=fe("lock",To);const Ro=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Po=fe("rotate-ccw",Ro);const Oo=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ae=fe("square-check-big",Oo);function We(t,[s,n]){return Math.min(n,Math.max(s,t))}function Do(t){const s=ko(t),n=a.forwardRef((i,r)=>{const{children:u,...c}=i,l=a.Children.toArray(u),d=l.find(Mo);if(d){const m=d.props.children,w=l.map(b=>b===d?a.Children.count(m)>1?a.Children.only(null):a.isValidElement(m)?m.props.children:null:b);return e.jsx(s,{...c,ref:r,children:a.isValidElement(m)?a.cloneElement(m,void 0,w):null})}return e.jsx(s,{...c,ref:r,children:u})});return n.displayName=`${t}.Slot`,n}function ko(t){const s=a.forwardRef((n,i)=>{const{children:r,...u}=n;if(a.isValidElement(r)){const c=Vo(r),l=Bo(u,r.props);return r.type!==a.Fragment&&(l.ref=i?Mt(i,c):c),a.cloneElement(r,l)}return a.Children.count(r)>1?a.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Lo=Symbol("radix.slottable");function Mo(t){return a.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Lo}function Bo(t,s){const n={...s};for(const i in s){const r=t[i],u=s[i];/^on[A-Z]/.test(i)?r&&u?n[i]=(...l)=>{const d=u(...l);return r(...l),d}:r&&(n[i]=r):i==="style"?n[i]={...r,...u}:i==="className"&&(n[i]=[r,u].filter(Boolean).join(" "))}return{...t,...n}}function Vo(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var rt=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Fo="VisuallyHidden",zo=a.forwardRef((t,s)=>e.jsx(H.span,{...t,ref:s,style:{...rt,...t.style}}));zo.displayName=Fo;var Ho=[" ","Enter","ArrowUp","ArrowDown"],Uo=[" ","Enter"],ce="Select",[ve,Se,Go]=Yt(ce),[me]=Jt(ce,[Go,nt]),we=nt(),[Wo,re]=me(ce),[Ko,$o]=me(ce),at=t=>{const{__scopeSelect:s,children:n,open:i,defaultOpen:r,onOpenChange:u,value:c,defaultValue:l,onValueChange:d,dir:m,name:w,autoComplete:b,disabled:D,required:O,form:_}=t,h=we(s),[y,j]=a.useState(null),[x,S]=a.useState(null),[Y,U]=a.useState(!1),ne=Qt(m),[B,G]=Le({prop:i,defaultProp:r??!1,onChange:u,caller:ce}),[Z,oe]=Le({prop:c,defaultProp:l,onChange:d,caller:ce}),$=a.useRef(null),z=y?_||!!y.closest("form"):!0,[X,q]=a.useState(new Set),J=Array.from(X).map(L=>L.props.value).join(";");return e.jsx(Zt,{...h,children:e.jsxs(Wo,{required:O,scope:s,trigger:y,onTriggerChange:j,valueNode:x,onValueNodeChange:S,valueNodeHasChildren:Y,onValueNodeHasChildrenChange:U,contentId:Oe(),value:Z,onValueChange:oe,open:B,onOpenChange:G,dir:ne,triggerPointerDownPosRef:$,disabled:D,children:[e.jsx(ve.Provider,{scope:s,children:e.jsx(Ko,{scope:t.__scopeSelect,onNativeOptionAdd:a.useCallback(L=>{q(o=>new Set(o).add(L))},[]),onNativeOptionRemove:a.useCallback(L=>{q(o=>{const p=new Set(o);return p.delete(L),p})},[]),children:n})}),z?e.jsxs(Et,{"aria-hidden":!0,required:O,tabIndex:-1,name:w,autoComplete:b,value:Z,onChange:L=>oe(L.target.value),disabled:D,form:_,children:[Z===void 0?e.jsx("option",{value:""}):null,Array.from(X)]},J):null]})})};at.displayName=ce;var it="SelectTrigger",lt=a.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,u=we(n),c=re(it,n),l=c.disabled||i,d=te(s,c.onTriggerChange),m=Se(n),w=a.useRef("touch"),[b,D,O]=_t(h=>{const y=m().filter(S=>!S.disabled),j=y.find(S=>S.value===c.value),x=Rt(y,h,j);x!==void 0&&c.onValueChange(x.value)}),_=h=>{l||(c.onOpenChange(!0),O()),h&&(c.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return e.jsx(Xt,{asChild:!0,...u,children:e.jsx(H.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Tt(c.value)?"":void 0,...r,ref:d,onClick:M(r.onClick,h=>{h.currentTarget.focus(),w.current!=="mouse"&&_(h)}),onPointerDown:M(r.onPointerDown,h=>{w.current=h.pointerType;const y=h.target;y.hasPointerCapture(h.pointerId)&&y.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(_(h),h.preventDefault())}),onKeyDown:M(r.onKeyDown,h=>{const y=b.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&D(h.key),!(y&&h.key===" ")&&Ho.includes(h.key)&&(_(),h.preventDefault())})})})});lt.displayName=it;var ct="SelectValue",dt=a.forwardRef((t,s)=>{const{__scopeSelect:n,className:i,style:r,children:u,placeholder:c="",...l}=t,d=re(ct,n),{onValueNodeHasChildrenChange:m}=d,w=u!==void 0,b=te(s,d.onValueNodeChange);return se(()=>{m(w)},[m,w]),e.jsx(H.span,{...l,ref:b,style:{pointerEvents:"none"},children:Tt(d.value)?e.jsx(e.Fragment,{children:c}):u})});dt.displayName=ct;var qo="SelectIcon",ut=a.forwardRef((t,s)=>{const{__scopeSelect:n,children:i,...r}=t;return e.jsx(H.span,{"aria-hidden":!0,...r,ref:s,children:i||"▼"})});ut.displayName=qo;var Jo="SelectPortal",pt=t=>e.jsx(eo,{asChild:!0,...t});pt.displayName=Jo;var de="SelectContent",ft=a.forwardRef((t,s)=>{const n=re(de,t.__scopeSelect),[i,r]=a.useState();if(se(()=>{r(new DocumentFragment)},[]),!n.open){const u=i;return u?Ke.createPortal(e.jsx(mt,{scope:t.__scopeSelect,children:e.jsx(ve.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),u):null}return e.jsx(ht,{...t,ref:s})});ft.displayName=de;var Q=10,[mt,ae]=me(de),Qo="SelectContentImpl",Yo=Do("SelectContent.RemoveScroll"),ht=a.forwardRef((t,s)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:u,onPointerDownOutside:c,side:l,sideOffset:d,align:m,alignOffset:w,arrowPadding:b,collisionBoundary:D,collisionPadding:O,sticky:_,hideWhenDetached:h,avoidCollisions:y,...j}=t,x=re(de,n),[S,Y]=a.useState(null),[U,ne]=a.useState(null),B=te(s,f=>Y(f)),[G,Z]=a.useState(null),[oe,$]=a.useState(null),z=Se(n),[X,q]=a.useState(!1),J=a.useRef(!1);a.useEffect(()=>{if(S)return oo(S)},[S]),no();const L=a.useCallback(f=>{const[N,...P]=z().map(k=>k.ref.current),[T]=P.slice(-1),R=document.activeElement;for(const k of f)if(k===R||(k?.scrollIntoView({block:"nearest"}),k===N&&U&&(U.scrollTop=0),k===T&&U&&(U.scrollTop=U.scrollHeight),k?.focus(),document.activeElement!==R))return},[z,U]),o=a.useCallback(()=>L([G,S]),[L,G,S]);a.useEffect(()=>{X&&o()},[X,o]);const{onOpenChange:p,triggerPointerDownPosRef:g}=x;a.useEffect(()=>{if(S){let f={x:0,y:0};const N=T=>{f={x:Math.abs(Math.round(T.pageX)-(g.current?.x??0)),y:Math.abs(Math.round(T.pageY)-(g.current?.y??0))}},P=T=>{f.x<=10&&f.y<=10?T.preventDefault():S.contains(T.target)||p(!1),document.removeEventListener("pointermove",N),g.current=null};return g.current!==null&&(document.addEventListener("pointermove",N),document.addEventListener("pointerup",P,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",N),document.removeEventListener("pointerup",P,{capture:!0})}}},[S,p,g]),a.useEffect(()=>{const f=()=>p(!1);return window.addEventListener("blur",f),window.addEventListener("resize",f),()=>{window.removeEventListener("blur",f),window.removeEventListener("resize",f)}},[p]);const[I,C]=_t(f=>{const N=z().filter(R=>!R.disabled),P=N.find(R=>R.ref.current===document.activeElement),T=Rt(N,f,P);T&&setTimeout(()=>T.ref.current.focus())}),A=a.useCallback((f,N,P)=>{const T=!J.current&&!P;(x.value!==void 0&&x.value===N||T)&&(Z(f),T&&(J.current=!0))},[x.value]),E=a.useCallback(()=>S?.focus(),[S]),v=a.useCallback((f,N,P)=>{const T=!J.current&&!P;(x.value!==void 0&&x.value===N||T)&&$(f)},[x.value]),F=i==="popper"?Ee:xt,W=F===Ee?{side:l,sideOffset:d,align:m,alignOffset:w,arrowPadding:b,collisionBoundary:D,collisionPadding:O,sticky:_,hideWhenDetached:h,avoidCollisions:y}:{};return e.jsx(mt,{scope:n,content:S,viewport:U,onViewportChange:ne,itemRefCallback:A,selectedItem:G,onItemLeave:E,itemTextRefCallback:v,focusSelectedItem:o,selectedItemText:oe,position:i,isPositioned:X,searchRef:I,children:e.jsx(so,{as:Yo,allowPinchZoom:!0,children:e.jsx(ro,{asChild:!0,trapped:x.open,onMountAutoFocus:f=>{f.preventDefault()},onUnmountAutoFocus:M(r,f=>{x.trigger?.focus({preventScroll:!0}),f.preventDefault()}),children:e.jsx(ao,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:f=>f.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:e.jsx(F,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:f=>f.preventDefault(),...j,...W,onPlaced:()=>q(!0),ref:B,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:M(j.onKeyDown,f=>{const N=f.ctrlKey||f.altKey||f.metaKey;if(f.key==="Tab"&&f.preventDefault(),!N&&f.key.length===1&&C(f.key),["ArrowUp","ArrowDown","Home","End"].includes(f.key)){let T=z().filter(R=>!R.disabled).map(R=>R.ref.current);if(["ArrowUp","End"].includes(f.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(f.key)){const R=f.target,k=T.indexOf(R);T=T.slice(k+1)}setTimeout(()=>L(T)),f.preventDefault()}})})})})})})});ht.displayName=Qo;var Zo="SelectItemAlignedPosition",xt=a.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,u=re(de,n),c=ae(de,n),[l,d]=a.useState(null),[m,w]=a.useState(null),b=te(s,B=>w(B)),D=Se(n),O=a.useRef(!1),_=a.useRef(!0),{viewport:h,selectedItem:y,selectedItemText:j,focusSelectedItem:x}=c,S=a.useCallback(()=>{if(u.trigger&&u.valueNode&&l&&m&&h&&y&&j){const B=u.trigger.getBoundingClientRect(),G=m.getBoundingClientRect(),Z=u.valueNode.getBoundingClientRect(),oe=j.getBoundingClientRect();if(u.dir!=="rtl"){const R=oe.left-G.left,k=Z.left-R,ie=B.left-k,le=B.width+ie,ye=Math.max(le,G.width),Ie=window.innerWidth-Q,Ce=We(k,[Q,Math.max(Q,Ie-ye)]);l.style.minWidth=le+"px",l.style.left=Ce+"px"}else{const R=G.right-oe.right,k=window.innerWidth-Z.right-R,ie=window.innerWidth-B.right-k,le=B.width+ie,ye=Math.max(le,G.width),Ie=window.innerWidth-Q,Ce=We(k,[Q,Math.max(Q,Ie-ye)]);l.style.minWidth=le+"px",l.style.right=Ce+"px"}const $=D(),z=window.innerHeight-Q*2,X=h.scrollHeight,q=window.getComputedStyle(m),J=parseInt(q.borderTopWidth,10),L=parseInt(q.paddingTop,10),o=parseInt(q.borderBottomWidth,10),p=parseInt(q.paddingBottom,10),g=J+L+X+p+o,I=Math.min(y.offsetHeight*5,g),C=window.getComputedStyle(h),A=parseInt(C.paddingTop,10),E=parseInt(C.paddingBottom,10),v=B.top+B.height/2-Q,F=z-v,W=y.offsetHeight/2,f=y.offsetTop+W,N=J+L+f,P=g-N;if(N<=v){const R=$.length>0&&y===$[$.length-1].ref.current;l.style.bottom="0px";const k=m.clientHeight-h.offsetTop-h.offsetHeight,ie=Math.max(F,W+(R?E:0)+k+o),le=N+ie;l.style.height=le+"px"}else{const R=$.length>0&&y===$[0].ref.current;l.style.top="0px";const ie=Math.max(v,J+h.offsetTop+(R?A:0)+W)+P;l.style.height=ie+"px",h.scrollTop=N-v+h.offsetTop}l.style.margin=`${Q}px 0`,l.style.minHeight=I+"px",l.style.maxHeight=z+"px",i?.(),requestAnimationFrame(()=>O.current=!0)}},[D,u.trigger,u.valueNode,l,m,h,y,j,u.dir,i]);se(()=>S(),[S]);const[Y,U]=a.useState();se(()=>{m&&U(window.getComputedStyle(m).zIndex)},[m]);const ne=a.useCallback(B=>{B&&_.current===!0&&(S(),x?.(),_.current=!1)},[S,x]);return e.jsx(en,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:O,onScrollButtonChange:ne,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Y},children:e.jsx(H.div,{...r,ref:b,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});xt.displayName=Zo;var Xo="SelectPopperPosition",Ee=a.forwardRef((t,s)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Q,...u}=t,c=we(n);return e.jsx(io,{...c,...u,ref:s,align:i,collisionPadding:r,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ee.displayName=Xo;var[en,De]=me(de,{}),Te="SelectViewport",gt=a.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:i,...r}=t,u=ae(Te,n),c=De(Te,n),l=te(s,u.onViewportChange),d=a.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(ve.Slot,{scope:n,children:e.jsx(H.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:M(r.onScroll,m=>{const w=m.currentTarget,{contentWrapper:b,shouldExpandOnScrollRef:D}=c;if(D?.current&&b){const O=Math.abs(d.current-w.scrollTop);if(O>0){const _=window.innerHeight-Q*2,h=parseFloat(b.style.minHeight),y=parseFloat(b.style.height),j=Math.max(h,y);if(j<_){const x=j+O,S=Math.min(_,x),Y=x-S;b.style.height=S+"px",b.style.bottom==="0px"&&(w.scrollTop=Y>0?Y:0,b.style.justifyContent="flex-end")}}}d.current=w.scrollTop})})})]})});gt.displayName=Te;var vt="SelectGroup",[tn,on]=me(vt),nn=a.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,r=Oe();return e.jsx(tn,{scope:n,id:r,children:e.jsx(H.div,{role:"group","aria-labelledby":r,...i,ref:s})})});nn.displayName=vt;var St="SelectLabel",sn=a.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,r=on(St,n);return e.jsx(H.div,{id:r.id,...i,ref:s})});sn.displayName=St;var ge="SelectItem",[rn,wt]=me(ge),yt=a.forwardRef((t,s)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:u,...c}=t,l=re(ge,n),d=ae(ge,n),m=l.value===i,[w,b]=a.useState(u??""),[D,O]=a.useState(!1),_=te(s,x=>d.itemRefCallback?.(x,i,r)),h=Oe(),y=a.useRef("touch"),j=()=>{r||(l.onValueChange(i),l.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(rn,{scope:n,value:i,disabled:r,textId:h,isSelected:m,onItemTextChange:a.useCallback(x=>{b(S=>S||(x?.textContent??"").trim())},[]),children:e.jsx(ve.ItemSlot,{scope:n,value:i,disabled:r,textValue:w,children:e.jsx(H.div,{role:"option","aria-labelledby":h,"data-highlighted":D?"":void 0,"aria-selected":m&&D,"data-state":m?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...c,ref:_,onFocus:M(c.onFocus,()=>O(!0)),onBlur:M(c.onBlur,()=>O(!1)),onClick:M(c.onClick,()=>{y.current!=="mouse"&&j()}),onPointerUp:M(c.onPointerUp,()=>{y.current==="mouse"&&j()}),onPointerDown:M(c.onPointerDown,x=>{y.current=x.pointerType}),onPointerMove:M(c.onPointerMove,x=>{y.current=x.pointerType,r?d.onItemLeave?.():y.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:M(c.onPointerLeave,x=>{x.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:M(c.onKeyDown,x=>{d.searchRef?.current!==""&&x.key===" "||(Uo.includes(x.key)&&j(),x.key===" "&&x.preventDefault())})})})})});yt.displayName=ge;var he="SelectItemText",It=a.forwardRef((t,s)=>{const{__scopeSelect:n,className:i,style:r,...u}=t,c=re(he,n),l=ae(he,n),d=wt(he,n),m=$o(he,n),[w,b]=a.useState(null),D=te(s,j=>b(j),d.onItemTextChange,j=>l.itemTextRefCallback?.(j,d.value,d.disabled)),O=w?.textContent,_=a.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:O},d.value),[d.disabled,d.value,O]),{onNativeOptionAdd:h,onNativeOptionRemove:y}=m;return se(()=>(h(_),()=>y(_)),[h,y,_]),e.jsxs(e.Fragment,{children:[e.jsx(H.span,{id:d.textId,...u,ref:D}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Ke.createPortal(u.children,c.valueNode):null]})});It.displayName=he;var Ct="SelectItemIndicator",bt=a.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t;return wt(Ct,n).isSelected?e.jsx(H.span,{"aria-hidden":!0,...i,ref:s}):null});bt.displayName=Ct;var _e="SelectScrollUpButton",Nt=a.forwardRef((t,s)=>{const n=ae(_e,t.__scopeSelect),i=De(_e,t.__scopeSelect),[r,u]=a.useState(!1),c=te(s,i.onScrollButtonChange);return se(()=>{if(n.viewport&&n.isPositioned){let l=function(){const m=d.scrollTop>0;u(m)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?e.jsx(At,{...t,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});Nt.displayName=_e;var Re="SelectScrollDownButton",jt=a.forwardRef((t,s)=>{const n=ae(Re,t.__scopeSelect),i=De(Re,t.__scopeSelect),[r,u]=a.useState(!1),c=te(s,i.onScrollButtonChange);return se(()=>{if(n.viewport&&n.isPositioned){let l=function(){const m=d.scrollHeight-d.clientHeight,w=Math.ceil(d.scrollTop)<m;u(w)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?e.jsx(At,{...t,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});jt.displayName=Re;var At=a.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,u=ae("SelectScrollButton",n),c=a.useRef(null),l=Se(n),d=a.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return a.useEffect(()=>()=>d(),[d]),se(()=>{l().find(w=>w.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),e.jsx(H.div,{"aria-hidden":!0,...r,ref:s,style:{flexShrink:0,...r.style},onPointerDown:M(r.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(i,50))}),onPointerMove:M(r.onPointerMove,()=>{u.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(i,50))}),onPointerLeave:M(r.onPointerLeave,()=>{d()})})}),an="SelectSeparator",ln=a.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t;return e.jsx(H.div,{"aria-hidden":!0,...i,ref:s})});ln.displayName=an;var Pe="SelectArrow",cn=a.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,r=we(n),u=re(Pe,n),c=ae(Pe,n);return u.open&&c.position==="popper"?e.jsx(lo,{...r,...i,ref:s}):null});cn.displayName=Pe;var dn="SelectBubbleInput",Et=a.forwardRef(({__scopeSelect:t,value:s,...n},i)=>{const r=a.useRef(null),u=te(i,r),c=co(s);return a.useEffect(()=>{const l=r.current;if(!l)return;const d=window.HTMLSelectElement.prototype,w=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==s&&w){const b=new Event("change",{bubbles:!0});w.call(l,s),l.dispatchEvent(b)}},[c,s]),e.jsx(H.select,{...n,style:{...rt,...n.style},ref:u,defaultValue:s})});Et.displayName=dn;function Tt(t){return t===""||t===void 0}function _t(t){const s=to(t),n=a.useRef(""),i=a.useRef(0),r=a.useCallback(c=>{const l=n.current+c;s(l),(function d(m){n.current=m,window.clearTimeout(i.current),m!==""&&(i.current=window.setTimeout(()=>d(""),1e3))})(l)},[s]),u=a.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,u]}function Rt(t,s,n){const r=s.length>1&&Array.from(s).every(m=>m===s[0])?s[0]:s,u=n?t.indexOf(n):-1;let c=un(t,Math.max(u,0));r.length===1&&(c=c.filter(m=>m!==n));const d=c.find(m=>m.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==n?d:void 0}function un(t,s){return t.map((n,i)=>t[(s+i)%t.length])}var pn=at,fn=lt,mn=dt,hn=ut,xn=pt,gn=ft,vn=gt,Sn=yt,wn=It,yn=bt,In=Nt,Cn=jt;function Pt({...t}){return e.jsx(pn,{"data-slot":"select",...t})}function Ot({...t}){return e.jsx(mn,{"data-slot":"select-value",...t})}function Dt({className:t,size:s="default",children:n,...i}){return e.jsxs(fn,{"data-slot":"select-trigger","data-size":s,className:pe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[n,e.jsx(hn,{asChild:!0,children:e.jsx(st,{className:"size-4 opacity-50"})})]})}function kt({className:t,children:s,position:n="popper",align:i="center",...r}){return e.jsx(xn,{children:e.jsxs(gn,{"data-slot":"select-content",className:pe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,align:i,...r,children:[e.jsx(bn,{}),e.jsx(vn,{className:pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(Nn,{})]})})}function Lt({className:t,children:s,...n}){return e.jsxs(Sn,{"data-slot":"select-item",className:pe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(yn,{children:e.jsx(uo,{className:"size-4"})})}),e.jsx(wn,{children:s})]})}function bn({className:t,...s}){return e.jsx(In,{"data-slot":"select-scroll-up-button",className:pe("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(po,{className:"size-4"})})}function Nn({className:t,...s}){return e.jsx(Cn,{"data-slot":"select-scroll-down-button",className:pe("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(st,{className:"size-4"})})}function jn({close:t,open:s,data:n,onChange:i,type:r}){const u=qe(),{handleSubmit:c,reset:l,control:d}=u;function m({reason:w}){i(w),l(),t()}return e.jsx(Je,{open:s,onOpenChange:w=>!w&&t(),children:e.jsxs(Qe,{className:"w-full",children:[e.jsx($t,{children:e.jsxs(qt,{className:"text-center text-2xl font-bold text-primary",children:[r===0&&"Pausando o atendimento",r===1&&"Retomando o atendimento"]})}),e.jsx(Ye,{...u,children:e.jsxs("form",{className:"flex flex-col gap-4 w-full",onSubmit:c(m),children:[e.jsx(Ze,{control:d,name:"reason",rules:{required:"Campo obrigatório"},render:({field:w})=>e.jsxs(Xe,{children:[e.jsx(et,{children:"Selecione o motivo"}),e.jsxs(Pt,{onValueChange:w.onChange,defaultValue:w.value,children:[e.jsx(tt,{className:"w-full",children:e.jsx(Dt,{children:e.jsx(Ot,{placeholder:"Selecione uma opção"})})}),e.jsx(kt,{children:n?.map(b=>e.jsx(Lt,{value:b.GMI_ID.toString(),children:b.GMI_DESCRICAO},b.GMI_ID))})]}),e.jsx(ot,{})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-between gap-2 pt-4",children:[e.jsxs(je,{onClick:t,type:"button",variant:"destructive",className:"w-full",children:[e.jsx($e,{size:20}),"Fechar"]}),e.jsxs(je,{type:"submit",className:"w-full py-5",children:[e.jsx(Ae,{size:20}),"Salvar"]})]})]})})]})})}function ts(){const[t,s]=a.useState(null),[n,i]=a.useState({open:!1,type:0}),[r,u]=a.useState(!1),[c,l]=a.useState(!1),{stopWatch:d,interruptForced:m}=Wt(t,{onForcedBreakStart:async()=>{await z(1,!0,!0)},onWarningEnd:async()=>{await z(1,!1,!1)},onForcedBreakEnd:async()=>{if(await z(10,!1,!1),t){if(t.status=2,!t.startAttendances){const{latitude:o,longitude:p}=await ue(),g=Ue(new Date),I=await vo(t,t?.GAA_ID,o,p,g);I&&I.sucessStarted&&Object.assign(t,I)}await ee(t),s({...t})}}}),[,w,b]=wo("currentCustomer"),D=qe(),{control:O,handleSubmit:_,setValue:h,getValues:y}=D,j=Bt(),{showLoading:x,hideLoading:S}=Vt();async function Y(o,p){try{if(await xe({title:"ATENDER",component:e.jsxs("div",{className:"text-primary flex flex-col items-start gap-2 px-2",children:[e.jsxs("span",{children:["Você está prestes a ",e.jsx("strong",{children:"INICIAR"})," o atendimento em"," ",e.jsxs("strong",{className:"text-primary font-extrabold",children:[o.CLI_NOME_FANTASIA," "]})]}),e.jsxs("div",{className:"border-l-primary border-primary-50 shadow-primary-50 flex w-full flex-col gap-2 rounded-xl border border-l-4 px-2 py-4 shadow-sm",children:[e.jsx("span",{className:"font-normal",children:"CLIENTE"}),e.jsx("span",{className:"font-extrabold",children:`${o.CLI_NOME_FANTASIA?.toUpperCase()}`})]})]}),confirm:"Iniciar atendimento"})){x("Iniciando atendimento");const{latitude:I,longitude:C}=await ue();if(!I||!C){K("Não foi possível buscar a localização atual, tente novamente"),S();return}if(ne(t))K("O horário de expediente chegou ao fim!");else{let E;p&&(E=await be());for(const v of t.CLIENTES)if(v.SEQ_PADRAO===o.SEQ_PADRAO){const W=t?.HORARIOS_TRABALHO?.RAIO_ATENDIMENTO<=0?!1:await fo(v,t,I,C);if(W){const f=[];for(const N of W){const P={};P.descricao=N.GTI_DESCRICAO,P.galId=N.GAL_ID,P.liberado=N.GTI_FLG_IMPEDE_ATD!==1,P.lido=N.GAL_FLG_STATUS===1,P.DISTANCE=N.DISTANCE,P.distanceNumber=N.distanceNumber,f.push(P)}v.alert=f,v.galId=f.find(N=>N.liberado===!1)?.galId,await ee(t),s(t);return}else{const f=[{descricao:null,galId:null,liberado:!0,lido:null}];v.alert=f,v.galId=!1}if(V(v.checkIn)||(v.checkIn=[]),v.status===0||v.status===void 0||v.status===2){const f={};f.start=new Date,f.status=1,f.latitudeCheckIn=I,f.longitudeCheckIn=C,v.checkIn.push(f),v.status=1,v.lastCheckIn=f.start,v.lastCheckout=void 0}}if(t.emAtendimento=!0,t.cliAtendimento=o.SEQ_PADRAO,t.CLI_IN_PROGRESS=o.CLI_ID,t.status=2,await ee(t),s(t),p){if(!await mo(t)){await ee(E),s(E),K(`Não foi possível iniciar o atendimento.
Verifique sua conexão com a internet e se seu GPS está ativo.`),S();return}S()}t.cliAtendimento=o.SEQ_PADRAO,t.CLI_IN_PROGRESS=o.CLI_ID,await ee(t),w(o),j("/pesquisas-service")}}}catch{K("Não foi possível iniciar o atendimento")}finally{S()}}function U(o){w(o),j("/pesquisas-service")}function ne(o){try{const p=o.CLIENTES.find(g=>g.status===1);if(o&&o.HORARIOS_TRABALHO&&Object.keys(o.HORARIOS_TRABALHO).length!==0){const g=new Date;if(o.HORARIOS_TRABALHO?.FIM_JORNADA!==null){const C=o.HORARIOS_TRABALHO?.FIM_JORNADA?.split(":",3);g.setHours(C[0],C[1],C[2]||0)}const I=So(new Date,g);return I>0?(u(!0),!0):I<=0||p?(u(!1),!1):(u(!0),!0)}}catch{return u(!1),!1}}async function B(o){const p=t.CLIENTES.find(v=>v.SEQ_PADRAO===o.SEQ_PADRAO),g=t.CLIENTES.findIndex(v=>v.SEQ_PADRAO===p.SEQ_PADRAO),I=t.CLIENTES[g]?.alert?.findIndex(v=>v.liberado===!1);x("Verificando liberação");const{latitude:C,longitude:A}=await ue();if(p.CLI_LATITUDE!==null&&p.CLI_LONGITUDE!==null&&p.status!==1&&p.galId!==!1&&C&&A){let v=await ho(p.CLI_LATITUDE,p.CLI_LONGITUDE,C,A,"K");v=v*1e3;const F=t.HORARIOS_TRABALHO.RAIO_ATENDIMENTO,W=v>1e3?`${parseFloat(ze(v/1e3))}km`:`${parseFloat(ze(v))}m`;if(v<=F){const f={pos:g,status:1};await Z(t?.CLIENTES[g]?.alert[I]?.galId),await G(f),K("Atendimento liberado",1),S();return}else typeof g=="number"&&g!==-1&&typeof I=="number"&&I!==-1&&(t.CLIENTES[g].alert[I].DISTANCE=W,await ee(t),s(t))}const E=await xo(p,t,1);await G(E),S()}async function G(o){if(o){if(o.status===1&&o!==!1){const p=t.CLIENTES[o.pos].alert.findIndex(g=>g.liberado===!1);t.CLIENTES[o.pos].alert[p].liberado=!0,t.CLIENTES[o.pos].alert[p].lido=!0,t.CLIENTES[o.pos].alert[p].observation=`Liberado ${He(new Date)}`,t.CLIENTES[o.pos].galId=!1,K("Atendimento liberado",1),await ee(t),s(t)}else if(o.status===-1&&o!==!1){const p=t.CLIENTES[o.pos].alert.findIndex(g=>g.liberado===!1);t.CLIENTES[o.pos].alert[p].liberado=-1,t.CLIENTES[o.pos].alert[p].lido=!0,t.CLIENTES[o.pos].alert[p].observation=`Não foi liberado ${He(new Date)}`,t.CLIENTES[o.pos].galId=-1,await ee(t),s(t)}}}async function Z(o){try{const p=ke();if(p){const g=p.empresaId,I=p.codigoUsuario,C={};C.galId=o,C.liberado=!0,C.lido=!0,await Ut.put(`v1/tradedashboard/alerts/${g}/${I}`,C)}}catch{}}async function oe(){if(t?.CLIENTES.find(f=>f.checkIn===void 0&&f.motivoNaoAtendimento===void 0)){K("Justifique os clientes não atendidos");return}if(!await xe({title:"Finalizar",message:"Tem certeza que deseja finalizar esse atendimento?"}))return;const{latitude:p,longitude:g}=await ue();if(!p||!g){K("Não foi possível buscar a localização atual, tente novamente"),S();return}const I=ke();if(!I){K("Não foi possível buscar a sessão, tente novamente"),S();return}const C=I.gmovelHodometro,A=await Gt("currentDrivenOdometro"),E=Ge(new Date,"dd/MM/yyyy"),v=A?.GKM_KM_INICIAL_DATA?Ge(new Date(A?.GKM_KM_INICIAL_DATA),"dd/MM/yyyy"):null;if(C&&!A&&!A?.GKM_KM_FINAL&&!A?.GKM_KM_FINAL_FOTO&&v&&E!==v){K("Para finalizar o dia, é necessário informar o KM final, e a foto"),S();return}x("Finalizando o dia");const F=Ue(new Date),W=await go(t,t?.GAA_ID,p,g,F,x);S(),W&&j("/")}async function $({reason:o}){l(!1);const p=y("customer");if(!await xe({title:"Confirmar ação de não atender?",message:"Tem certeza que deseja confirmar a ação de não atender?"})){l(!0);return}const I=await be(),C=t.TIPOS_JUSTIFICATIVA.find(E=>E.GAJ_ID===parseInt(o));for(const E of t.CLIENTES)E.SEQ_PADRAO===p&&(E.motivoNaoAtendimento=C.GAJ_DESCRICAO);x("Sincronizando"),await Ve(t,!1,x)?(await ee(t),s(t)):(s(I),K(`Não foi possível justificar o não atendimento.
Verifique sua conexão com a internet e se seu GPS está ativo.`),l(!0)),S()}async function z(o,p,g){const{latitude:I,longitude:C}=await ue();let A,E;if(p?E=p:(x("Atualizando status"),g?(E=o,await X(),i({open:!1,type:0})):(E=o,await q(),i({open:!1,type:-1}))),V(E))A=t.TIPOS_INTERRUPCAO.find(v=>v.GMI_ID===parseInt(E));else{K("A justificativa é obrigatória");return}t.interrupts===void 0&&(t.interrupts=[]),A&&(A.latitude=I,A.longitude=C,A.dataHora=new Date),t.interrupts.push(A),t.status=g?-1:2,await ee(t),s(t),S()}async function X(){t.status=-1,await Fe(t.GAA_ID,-1)}async function q(){t.status=2,await Fe(t.GAA_ID,2)}async function J(o,p){const{latitude:g,longitude:I}=await ue();if(g&&I){const C={latitude:g,longitude:I},A={latitude:o,longitude:p};window.open(`https://www.google.com/maps/dir/?api=1&origin=${C.latitude},${C.longitude}&destination=${A.latitude},${A.longitude}`,"Rota Cliente")}}const L=a.useRef(!1);return a.useEffect(()=>{(async function(){if(b(),L.current)return;const p=await be();p&&(L.current=!0,s(p),ne(p))})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(Ft,{title:"Atendimentos",showBackButton:!0,backPath:"/"}),e.jsxs("div",{className:"h-full background-pages flex flex-col lg:pt-16",children:[e.jsx("header",{className:"bg-primary/95 backdrop-blur-xl p-4 shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[m!==2&&!r&&e.jsxs("button",{onClick:()=>{t?.status===2?i({open:!0,type:0}):i({open:!0,type:1})},className:Ne("inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 backdrop-blur-xs text-white text-sm border border-white/50",t?.status===-1&&"bg-white text-primary"),children:[e.jsx(bo,{size:18}),e.jsxs("span",{className:"font-medium",children:[t?.status===-1&&"Retomar",t?.status===2&&"Pausar"]})]}),e.jsxs("span",{className:"ml-2 px-3 py-2 bg-white/15 rounded-full backdrop-blur-xs text-white text-sm border border-white/30",children:[t?.CLIENTES?.length||0," clientes"]})]})}),e.jsxs("main",{className:"flex-1 overflow-y-auto px-2 py-6 pb-20",children:[e.jsx(Kt,{stopWatch:d,interruptForced:m}),r&&e.jsx("div",{className:"w-full -mt-4 mb-4 overflow-hidden rounded-xl border border-red-900/30 bg-red-950 shadow-lg max-w-2xl mx-auto",children:e.jsxs("div",{className:"flex items-start gap-3 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-red-900 text-red-300",children:e.jsx("i",{children:e.jsx(yo,{size:20})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-50",children:"Horário de Atendimento Encerrado"}),e.jsx("p",{className:"text-xs text-red-100",children:"O expediente de hoje foi finalizado"})]})]})}),e.jsx("div",{className:"space-y-4 max-w-2xl mx-auto",children:t?.CLIENTES?.map(o=>{const p=o?.pesquisas?.length||0,g=o.status===2&&o.checkIn!==void 0&&V(o.checkIn),I=t?.status!==-1&&o.status!==1&&!V(o.motivoNaoAtendimento)&&!o.galId&&!r&&!t.emAtendimento,C=t?.status!==-1&&o.status!==1&&!V(o.motivoNaoAtendimento)&&o.galId!==-1&&!r&&o?.alert&&o?.alert.length>0&&o?.alert?.some(F=>!F.liberado),A=t?.status!==-1&&o.checkIn===void 0&&!V(o.motivoNaoAtendimento)&&o.galId!==-1&&!t.emAtendimento,E=o.galId!==-1&&!r&&o.status===1&&t.status!==-1,v=I||C||A||E;return e.jsxs("div",{className:Ne("bg-white/95 backdrop-blur-md rounded-3xl shadow-xl overflow-hidden border border-white/30",o.checkIn!==void 0&&o.status===1&&"border-blue-600/70",V(o.motivoNaoAtendimento)&&"border-red-600/70"),children:[e.jsx("div",{className:"p-5 bg-linear-to-r from-white to-primary/15",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:Ne("w-16 h-16 rounded-2xl bg-linear-to-br from-primary/70 via-primary to-primary/70 flex items-center justify-center shrink-0",o.checkIn!==void 0&&o.status===1&&"from-blue-700 via-blue-600 to-blue-700",V(o.motivoNaoAtendimento)&&"from-red-400 via-red-700 to-red-400",g&&"from-green-600 via-green-700 to-green-600"),children:[g&&e.jsx(zt,{size:28,className:"text-white"}),o.status===1&&e.jsx(Eo,{size:28,className:"text-white"}),V(o.motivoNaoAtendimento)&&e.jsx(Ht,{size:28,className:"text-white"}),!V(o.checkIn)&&!V(o.motivoNaoAtendimento)&&e.jsx(Io,{size:28,className:"text-white"})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"flex items-start justify-between gap-2 mb-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"inline-block px-2 py-0.5 bg-primary text-white text-xs rounded-full",children:["#",o.CLI_CODIGO]}),o.galId!==-1&&!r&&o.status===1&&t.status!==-1&&!V(o.motivoNaoAtendimento)&&e.jsx("span",{className:"inline-block px-2 py-0.5 bg-blue-700 text-white text-xs rounded-full",children:"Em atendimento"}),V(o.motivoNaoAtendimento)&&e.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-600 text-white text-xs rounded-full",children:"Não atendido"}),g&&e.jsx("span",{className:"inline-block px-2 py-0.5 bg-green-700 text-white text-xs rounded-full",children:"Atendido"})]}),e.jsx("h3",{className:"text-primary text-lg font-black -mt-1",children:o.CLI_NOME_FANTASIA}),e.jsx("p",{className:"text-sm text-primary -mt-1",children:o.CLI_RAZAO_SOCIAL}),e.jsxs("p",{className:"text-sm font-medium text-blue-700 -mt-1",children:[p," pesquisas"]})]})})})]})}),o.alert&&o.galId!==-1&&o.galId!==!1&&!r&&e.jsx("div",{className:"px-5 py-4 bg-red-50 border-y border-red-200/80",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{children:e.jsx(_o,{size:20,className:"text-red-600 shrink-0 mt-0.5"})}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("p",{className:"text-red-800 font-bold mb-1 text-base",children:"Atendimento bloqueado"}),e.jsx("p",{className:"text-red-700 text-[15px]",children:o.alert.find(F=>F.liberado===!1)?.descricao}),e.jsxs("p",{className:"text-red-700 text-[15px] mt-1",children:["Distância:"," ",o.alert.find(F=>F.liberado===!1)?.DISTANCE]})]})]})}),V(o.CLI_LATITUDE)&&V(o.CLI_LONGITUDE)&&!r&&e.jsx("div",{className:"px-5 py-2 bg-linear-to-r from-white to-primary/15 border-y border-primary/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{children:e.jsx(Me,{size:18,className:"text-primary shrink-0"})}),e.jsx("div",{className:"flex-1 text-sm",children:e.jsx("p",{className:"text-primary/95",children:"Localização disponível"})}),e.jsxs("button",{onClick:()=>J(o.CLI_LATITUDE,o.CLI_LONGITUDE),className:"px-4 py-2 bg-white rounded-xl text-sm text-primary flex items-center gap-1 shadow-sm border border-primary/20",children:[e.jsx(Me,{size:14}),e.jsx("span",{children:"Rota"})]})]})}),V(o.motivoNaoAtendimento)&&e.jsx("div",{className:"px-5 py-3 bg-red-50 border-y border-red-200",children:e.jsxs("p",{className:"text-center text-sm font-medium text-red-700",children:["NÃO ATENDIDO (",o.motivoNaoAtendimento,")"]})}),e.jsxs("div",{className:`flex gap-3 flex-wrap ${v?"p-3":"py-0"}`,children:[I&&e.jsxs("button",{onClick:()=>Y(o,!0),className:"flex-1 flex items-center justify-center gap-2 py-3.5 px-4 rounded-xl bg-primary text-white active:scale-[0.97]",children:[e.jsx(Be,{size:20}),e.jsx("span",{children:"Atender"})]}),C&&e.jsxs("button",{onClick:async()=>await B(o),className:"flex-1 flex items-center justify-center gap-2 py-3.5 px-4 rounded-xl bg-linear-to-r from-primary/85 to-primary text-white hover:shadow-xl transition-all active:scale-[0.97] group",children:[e.jsx(Po,{size:20,className:"group-hover:scale-110 transition-transform"}),e.jsx("span",{children:"Verificar"})]}),A&&e.jsxs("button",{onClick:()=>{l(!0),h("customer",o.SEQ_PADRAO)},className:"flex-1 flex items-center justify-center gap-2 py-3.5 px-4 rounded-xl border-2 border-red-300 bg-red-600 text-white active:scale-[0.97]",children:[e.jsx($e,{size:20}),e.jsx("span",{children:"Não atender"})]}),E&&e.jsxs("button",{onClick:()=>U(o),className:"flex-1 flex items-center justify-center gap-2 py-3.5 px-4 rounded-xl bg-blue-700 text-white active:scale-[0.97]",children:[e.jsx(Be,{size:20}),e.jsx("span",{children:"Continuar"})]})]})]},o.SEQ_PADRAO)})})]}),e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white/10 backdrop-blur-xl border-t border-white/20 px-4 py-2",children:e.jsxs("div",{className:"flex gap-3 max-w-2xl mx-auto",children:[!r&&e.jsxs("button",{onClick:async()=>{await xe({title:"Sincronizar",message:"Deseja sincronizar os dados? Este processo pode levar alguns minutos e necessita de conexão com a internet"})&&(x("Sincronizando"),await Ve(t,!1,x),S())},className:"flex-1 flex items-center justify-center gap-2 py-4 px-4 rounded-2xl bg-primary text-white",children:[e.jsx(jo,{size:20}),e.jsx("span",{children:"Sincronizar"})]}),t?.status!==-1&&e.jsxs("button",{onClick:oe,className:"flex-1 flex items-center justify-center gap-2 py-4 px-4 rounded-2xl bg-white text-primary",children:[e.jsx(Ae,{size:20}),e.jsx("span",{children:"Finalizar"})]})]})}),e.jsx(Je,{open:c,onOpenChange:()=>l(!1),children:e.jsx(Qe,{children:e.jsxs(Ye,{...D,children:[e.jsx("div",{className:"my-4 flex w-full items-center justify-center border-b border-border",children:e.jsx("span",{className:"text-center text-2xl font-bold text-primary",children:"Justificativa não atendimento"})}),e.jsxs("form",{className:"flex h-max w-full flex-col justify-between gap-4",onSubmit:_($),children:[e.jsx(Ze,{control:O,name:"reason",rules:{required:"Campo obrigatório"},render:({field:o})=>e.jsxs(Xe,{children:[e.jsx(et,{children:"Selecione o motivo"}),e.jsxs(Pt,{onValueChange:o.onChange,defaultValue:o.value,children:[e.jsx(tt,{className:"w-full",children:e.jsx(Dt,{children:e.jsx(Ot,{placeholder:"Selecione uma opção"})})}),e.jsx(kt,{children:t?.TIPOS_JUSTIFICATIVA?.map(p=>e.jsx(Lt,{value:p.GAJ_ID.toString(),children:p.GAJ_DESCRICAO},p.GAJ_ID))})]}),e.jsx(ot,{})]})}),e.jsx("div",{className:"flex-col flex w-full items-center justify-between gap-2",children:e.jsxs(je,{type:"submit",className:"mb-1 w-full",children:["Salvar ",e.jsx(Ae,{size:20})]})})]})]})})}),n.open&&e.jsx(jn,{open:n.open,type:n.type,data:n.type===0?t?.TIPOS_INTERRUPCAO.filter(o=>o.GMI_TIPO_INTERRUPCAO===0):t?.TIPOS_INTERRUPCAO.filter(o=>o.GMI_TIPO_INTERRUPCAO===1),close:()=>i({open:!1,type:-1}),onChange:o=>z(o,!1,n.type===0)})]})]})}export{ts as default};
