import{I as fe,L as a,N as e,a6 as Mt,a7 as te,a8 as Ke,P as pe,O as je,a9 as $e,J as Bt,K as Vt,U as be,aa as Ft,a1 as Ne,Z as F,ab as zt,X as Ht,a2 as xe,S as W,ac as ee,V as ke,R as Ut,a3 as Gt}from"./index-CYXlB6di.js";import{u as qe}from"./index.esm-g7wEG1vX.js";import{u as Wt,F as Kt}from"./useForcedBreak-BFwnm0D4.js";import{D as Je,a as Qe,b as $t,c as qt}from"./dialog-LwW192j0.js";import{F as Ye,a as Ze,b as Xe,c as et,d as tt,e as ot}from"./form-tFIv0F5k.js";import{P as H,u as Le,c as Jt,a as Oe,b as B,d as se}from"./index-DekvUVLv.js";import{u as Qt,c as Yt}from"./index-DSyZrcxj.js";import{c as nt,R as Zt,A as Xt,P as eo,u as to,h as oo,a as no,b as so,F as ro,D as ao,C as io,d as lo}from"./index-j1y6my5Y.js";import{u as co,M as Me}from"./index-BjrNbdaa.js";import{C as st}from"./chevron-down-BrwHMvvE.js";import{C as uo}from"./check-ihX-jt9T.js";import{C as po}from"./chevron-up-Dt0Be6tL.js";import{C as Be,b as Ve,g as ue,c as fo,d as mo,f as ho,i as xo,e as go,j as Fe,s as vo}from"./homeServices-C-QDDkvr.js";import{f as ze}from"./currency-CxFzcO-j.js";import{d as So,b as He,f as Ue}from"./timesAndDates-BA0J74pm.js";import{u as wo}from"./useLocalStorage-C6Tu5Tk7.js";import{C as yo}from"./clock-IyxNcF_P.js";import{S as Io}from"./store-D1vNHo_u.js";import{f as Ge}from"./format-BBYAYFtJ.js";import"./timer-CktEQguA.js";import"./index-BqX2kfYm.js";import"./label-DZv4CB4a.js";import"./apiEndpoints-aSQtSIWE.js";import"./handleApiError-Mr_6qIMG.js";import"./useQuery-hx1aMKYH.js";import"./addDays-CyOWDzeI.js";import"./startOfDay-Be0wd0F5.js";import"./pt-BR-mIVN-mbg.js";const Co=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],bo=fe("circle-pause",Co);const No=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],jo=fe("cloud-upload",No);const Ao=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Eo=fe("loader",Ao);const To=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],_o=fe("lock",To);const Ro=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Po=fe("rotate-ccw",Ro);const Oo=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ae=fe("square-check-big",Oo);function We(t,[s,n]){return Math.min(n,Math.max(s,t))}function Do(t){const s=ko(t),n=a.forwardRef((i,r)=>{const{children:u,...c}=i,l=a.Children.toArray(u),d=l.find(Mo);if(d){const f=d.props.children,S=l.map(N=>N===d?a.Children.count(f)>1?a.Children.only(null):a.isValidElement(f)?f.props.children:null:N);return e.jsx(s,{...c,ref:r,children:a.isValidElement(f)?a.cloneElement(f,void 0,S):null})}return e.jsx(s,{...c,ref:r,children:u})});return n.displayName=`${t}.Slot`,n}function ko(t){const s=a.forwardRef((n,i)=>{const{children:r,...u}=n;if(a.isValidElement(r)){const c=Vo(r),l=Bo(u,r.props);return r.type!==a.Fragment&&(l.ref=i?Mt(i,c):c),a.cloneElement(r,l)}return a.Children.count(r)>1?a.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var Lo=Symbol("radix.slottable");function Mo(t){return a.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Lo}function Bo(t,s){const n={...s};for(const i in s){const r=t[i],u=s[i];/^on[A-Z]/.test(i)?r&&u?n[i]=(...l)=>{const d=u(...l);return r(...l),d}:r&&(n[i]=r):i==="style"?n[i]={...r,...u}:i==="className"&&(n[i]=[r,u].filter(Boolean).join(" "))}return{...t,...n}}function Vo(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var rt=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Fo="VisuallyHidden",zo=a.forwardRef((t,s)=>e.jsx(H.span,{...t,ref:s,style:{...rt,...t.style}}));zo.displayName=Fo;var Ho=[" ","Enter","ArrowUp","ArrowDown"],Uo=[" ","Enter"],ce="Select",[ve,Se,Go]=Yt(ce),[me]=Jt(ce,[Go,nt]),we=nt(),[Wo,re]=me(ce),[Ko,$o]=me(ce),at=t=>{const{__scopeSelect:s,children:n,open:i,defaultOpen:r,onOpenChange:u,value:c,defaultValue:l,onValueChange:d,dir:f,name:S,autoComplete:N,disabled:k,required:D,form:R}=t,m=we(s),[y,E]=a.useState(null),[h,v]=a.useState(null),[Q,U]=a.useState(!1),ne=Qt(f),[V,G]=Le({prop:i,defaultProp:r??!1,onChange:u,caller:ce}),[Y,oe]=Le({prop:c,defaultProp:l,onChange:d,caller:ce}),K=a.useRef(null),z=y?R||!!y.closest("form"):!0,[Z,$]=a.useState(new Set),q=Array.from(Z).map(M=>M.props.value).join(";");return e.jsx(Zt,{...m,children:e.jsxs(Wo,{required:D,scope:s,trigger:y,onTriggerChange:E,valueNode:h,onValueNodeChange:v,valueNodeHasChildren:Q,onValueNodeHasChildrenChange:U,contentId:Oe(),value:Y,onValueChange:oe,open:V,onOpenChange:G,dir:ne,triggerPointerDownPosRef:K,disabled:k,children:[e.jsx(ve.Provider,{scope:s,children:e.jsx(Ko,{scope:t.__scopeSelect,onNativeOptionAdd:a.useCallback(M=>{$(o=>new Set(o).add(M))},[]),onNativeOptionRemove:a.useCallback(M=>{$(o=>{const p=new Set(o);return p.delete(M),p})},[]),children:n})}),z?e.jsxs(Et,{"aria-hidden":!0,required:D,tabIndex:-1,name:S,autoComplete:N,value:Y,onChange:M=>oe(M.target.value),disabled:k,form:R,children:[Y===void 0?e.jsx("option",{value:""}):null,Array.from(Z)]},q):null]})})};at.displayName=ce;var it="SelectTrigger",lt=a.forwardRef((t,s)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,u=we(n),c=re(it,n),l=c.disabled||i,d=te(s,c.onTriggerChange),f=Se(n),S=a.useRef("touch"),[N,k,D]=_t(m=>{const y=f().filter(v=>!v.disabled),E=y.find(v=>v.value===c.value),h=Rt(y,m,E);h!==void 0&&c.onValueChange(h.value)}),R=m=>{l||(c.onOpenChange(!0),D()),m&&(c.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return e.jsx(Xt,{asChild:!0,...u,children:e.jsx(H.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Tt(c.value)?"":void 0,...r,ref:d,onClick:B(r.onClick,m=>{m.currentTarget.focus(),S.current!=="mouse"&&R(m)}),onPointerDown:B(r.onPointerDown,m=>{S.current=m.pointerType;const y=m.target;y.hasPointerCapture(m.pointerId)&&y.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(R(m),m.preventDefault())}),onKeyDown:B(r.onKeyDown,m=>{const y=N.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&k(m.key),!(y&&m.key===" ")&&Ho.includes(m.key)&&(R(),m.preventDefault())})})})});lt.displayName=it;var ct="SelectValue",dt=a.forwardRef((t,s)=>{const{__scopeSelect:n,className:i,style:r,children:u,placeholder:c="",...l}=t,d=re(ct,n),{onValueNodeHasChildrenChange:f}=d,S=u!==void 0,N=te(s,d.onValueNodeChange);return se(()=>{f(S)},[f,S]),e.jsx(H.span,{...l,ref:N,style:{pointerEvents:"none"},children:Tt(d.value)?e.jsx(e.Fragment,{children:c}):u})});dt.displayName=ct;var qo="SelectIcon",ut=a.forwardRef((t,s)=>{const{__scopeSelect:n,children:i,...r}=t;return e.jsx(H.span,{"aria-hidden":!0,...r,ref:s,children:i||"▼"})});ut.displayName=qo;var Jo="SelectPortal",pt=t=>e.jsx(eo,{asChild:!0,...t});pt.displayName=Jo;var de="SelectContent",ft=a.forwardRef((t,s)=>{const n=re(de,t.__scopeSelect),[i,r]=a.useState();if(se(()=>{r(new DocumentFragment)},[]),!n.open){const u=i;return u?Ke.createPortal(e.jsx(mt,{scope:t.__scopeSelect,children:e.jsx(ve.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),u):null}return e.jsx(ht,{...t,ref:s})});ft.displayName=de;var J=10,[mt,ae]=me(de),Qo="SelectContentImpl",Yo=Do("SelectContent.RemoveScroll"),ht=a.forwardRef((t,s)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:u,onPointerDownOutside:c,side:l,sideOffset:d,align:f,alignOffset:S,arrowPadding:N,collisionBoundary:k,collisionPadding:D,sticky:R,hideWhenDetached:m,avoidCollisions:y,...E}=t,h=re(de,n),[v,Q]=a.useState(null),[U,ne]=a.useState(null),V=te(s,x=>Q(x)),[G,Y]=a.useState(null),[oe,K]=a.useState(null),z=Se(n),[Z,$]=a.useState(!1),q=a.useRef(!1);a.useEffect(()=>{if(v)return oo(v)},[v]),no();const M=a.useCallback(x=>{const[w,...P]=z().map(L=>L.ref.current),[j]=P.slice(-1),O=document.activeElement;for(const L of x)if(L===O||(L?.scrollIntoView({block:"nearest"}),L===w&&U&&(U.scrollTop=0),L===j&&U&&(U.scrollTop=U.scrollHeight),L?.focus(),document.activeElement!==O))return},[z,U]),o=a.useCallback(()=>M([G,v]),[M,G,v]);a.useEffect(()=>{Z&&o()},[Z,o]);const{onOpenChange:p,triggerPointerDownPosRef:g}=h;a.useEffect(()=>{if(v){let x={x:0,y:0};const w=j=>{x={x:Math.abs(Math.round(j.pageX)-(g.current?.x??0)),y:Math.abs(Math.round(j.pageY)-(g.current?.y??0))}},P=j=>{x.x<=10&&x.y<=10?j.preventDefault():v.contains(j.target)||p(!1),document.removeEventListener("pointermove",w),g.current=null};return g.current!==null&&(document.addEventListener("pointermove",w),document.addEventListener("pointerup",P,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",w),document.removeEventListener("pointerup",P,{capture:!0})}}},[v,p,g]),a.useEffect(()=>{const x=()=>p(!1);return window.addEventListener("blur",x),window.addEventListener("resize",x),()=>{window.removeEventListener("blur",x),window.removeEventListener("resize",x)}},[p]);const[I,C]=_t(x=>{const w=z().filter(O=>!O.disabled),P=w.find(O=>O.ref.current===document.activeElement),j=Rt(w,x,P);j&&setTimeout(()=>j.ref.current.focus())}),_=a.useCallback((x,w,P)=>{const j=!q.current&&!P;(h.value!==void 0&&h.value===w||j)&&(Y(x),j&&(q.current=!0))},[h.value]),T=a.useCallback(()=>v?.focus(),[v]),A=a.useCallback((x,w,P)=>{const j=!q.current&&!P;(h.value!==void 0&&h.value===w||j)&&K(x)},[h.value]),b=i==="popper"?Ee:xt,X=b===Ee?{side:l,sideOffset:d,align:f,alignOffset:S,arrowPadding:N,collisionBoundary:k,collisionPadding:D,sticky:R,hideWhenDetached:m,avoidCollisions:y}:{};return e.jsx(mt,{scope:n,content:v,viewport:U,onViewportChange:ne,itemRefCallback:_,selectedItem:G,onItemLeave:T,itemTextRefCallback:A,focusSelectedItem:o,selectedItemText:oe,position:i,isPositioned:Z,searchRef:I,children:e.jsx(so,{as:Yo,allowPinchZoom:!0,children:e.jsx(ro,{asChild:!0,trapped:h.open,onMountAutoFocus:x=>{x.preventDefault()},onUnmountAutoFocus:B(r,x=>{h.trigger?.focus({preventScroll:!0}),x.preventDefault()}),children:e.jsx(ao,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:x=>x.preventDefault(),onDismiss:()=>h.onOpenChange(!1),children:e.jsx(b,{role:"listbox",id:h.contentId,"data-state":h.open?"open":"closed",dir:h.dir,onContextMenu:x=>x.preventDefault(),...E,...X,onPlaced:()=>$(!0),ref:V,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:B(E.onKeyDown,x=>{const w=x.ctrlKey||x.altKey||x.metaKey;if(x.key==="Tab"&&x.preventDefault(),!w&&x.key.length===1&&C(x.key),["ArrowUp","ArrowDown","Home","End"].includes(x.key)){let j=z().filter(O=>!O.disabled).map(O=>O.ref.current);if(["ArrowUp","End"].includes(x.key)&&(j=j.slice().reverse()),["ArrowUp","ArrowDown"].includes(x.key)){const O=x.target,L=j.indexOf(O);j=j.slice(L+1)}setTimeout(()=>M(j)),x.preventDefault()}})})})})})})});ht.displayName=Qo;var Zo="SelectItemAlignedPosition",xt=a.forwardRef((t,s)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,u=re(de,n),c=ae(de,n),[l,d]=a.useState(null),[f,S]=a.useState(null),N=te(s,V=>S(V)),k=Se(n),D=a.useRef(!1),R=a.useRef(!0),{viewport:m,selectedItem:y,selectedItemText:E,focusSelectedItem:h}=c,v=a.useCallback(()=>{if(u.trigger&&u.valueNode&&l&&f&&m&&y&&E){const V=u.trigger.getBoundingClientRect(),G=f.getBoundingClientRect(),Y=u.valueNode.getBoundingClientRect(),oe=E.getBoundingClientRect();if(u.dir!=="rtl"){const O=oe.left-G.left,L=Y.left-O,ie=V.left-L,le=V.width+ie,ye=Math.max(le,G.width),Ie=window.innerWidth-J,Ce=We(L,[J,Math.max(J,Ie-ye)]);l.style.minWidth=le+"px",l.style.left=Ce+"px"}else{const O=G.right-oe.right,L=window.innerWidth-Y.right-O,ie=window.innerWidth-V.right-L,le=V.width+ie,ye=Math.max(le,G.width),Ie=window.innerWidth-J,Ce=We(L,[J,Math.max(J,Ie-ye)]);l.style.minWidth=le+"px",l.style.right=Ce+"px"}const K=k(),z=window.innerHeight-J*2,Z=m.scrollHeight,$=window.getComputedStyle(f),q=parseInt($.borderTopWidth,10),M=parseInt($.paddingTop,10),o=parseInt($.borderBottomWidth,10),p=parseInt($.paddingBottom,10),g=q+M+Z+p+o,I=Math.min(y.offsetHeight*5,g),C=window.getComputedStyle(m),_=parseInt(C.paddingTop,10),T=parseInt(C.paddingBottom,10),A=V.top+V.height/2-J,b=z-A,X=y.offsetHeight/2,x=y.offsetTop+X,w=q+M+x,P=g-w;if(w<=A){const O=K.length>0&&y===K[K.length-1].ref.current;l.style.bottom="0px";const L=f.clientHeight-m.offsetTop-m.offsetHeight,ie=Math.max(b,X+(O?T:0)+L+o),le=w+ie;l.style.height=le+"px"}else{const O=K.length>0&&y===K[0].ref.current;l.style.top="0px";const ie=Math.max(A,q+m.offsetTop+(O?_:0)+X)+P;l.style.height=ie+"px",m.scrollTop=w-A+m.offsetTop}l.style.margin=`${J}px 0`,l.style.minHeight=I+"px",l.style.maxHeight=z+"px",i?.(),requestAnimationFrame(()=>D.current=!0)}},[k,u.trigger,u.valueNode,l,f,m,y,E,u.dir,i]);se(()=>v(),[v]);const[Q,U]=a.useState();se(()=>{f&&U(window.getComputedStyle(f).zIndex)},[f]);const ne=a.useCallback(V=>{V&&R.current===!0&&(v(),h?.(),R.current=!1)},[v,h]);return e.jsx(en,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:D,onScrollButtonChange:ne,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Q},children:e.jsx(H.div,{...r,ref:N,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});xt.displayName=Zo;var Xo="SelectPopperPosition",Ee=a.forwardRef((t,s)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=J,...u}=t,c=we(n);return e.jsx(io,{...c,...u,ref:s,align:i,collisionPadding:r,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ee.displayName=Xo;var[en,De]=me(de,{}),Te="SelectViewport",gt=a.forwardRef((t,s)=>{const{__scopeSelect:n,nonce:i,...r}=t,u=ae(Te,n),c=De(Te,n),l=te(s,u.onViewportChange),d=a.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(ve.Slot,{scope:n,children:e.jsx(H.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:B(r.onScroll,f=>{const S=f.currentTarget,{contentWrapper:N,shouldExpandOnScrollRef:k}=c;if(k?.current&&N){const D=Math.abs(d.current-S.scrollTop);if(D>0){const R=window.innerHeight-J*2,m=parseFloat(N.style.minHeight),y=parseFloat(N.style.height),E=Math.max(m,y);if(E<R){const h=E+D,v=Math.min(R,h),Q=h-v;N.style.height=v+"px",N.style.bottom==="0px"&&(S.scrollTop=Q>0?Q:0,N.style.justifyContent="flex-end")}}}d.current=S.scrollTop})})})]})});gt.displayName=Te;var vt="SelectGroup",[tn,on]=me(vt),nn=a.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,r=Oe();return e.jsx(tn,{scope:n,id:r,children:e.jsx(H.div,{role:"group","aria-labelledby":r,...i,ref:s})})});nn.displayName=vt;var St="SelectLabel",sn=a.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,r=on(St,n);return e.jsx(H.div,{id:r.id,...i,ref:s})});sn.displayName=St;var ge="SelectItem",[rn,wt]=me(ge),yt=a.forwardRef((t,s)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:u,...c}=t,l=re(ge,n),d=ae(ge,n),f=l.value===i,[S,N]=a.useState(u??""),[k,D]=a.useState(!1),R=te(s,h=>d.itemRefCallback?.(h,i,r)),m=Oe(),y=a.useRef("touch"),E=()=>{r||(l.onValueChange(i),l.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(rn,{scope:n,value:i,disabled:r,textId:m,isSelected:f,onItemTextChange:a.useCallback(h=>{N(v=>v||(h?.textContent??"").trim())},[]),children:e.jsx(ve.ItemSlot,{scope:n,value:i,disabled:r,textValue:S,children:e.jsx(H.div,{role:"option","aria-labelledby":m,"data-highlighted":k?"":void 0,"aria-selected":f&&k,"data-state":f?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...c,ref:R,onFocus:B(c.onFocus,()=>D(!0)),onBlur:B(c.onBlur,()=>D(!1)),onClick:B(c.onClick,()=>{y.current!=="mouse"&&E()}),onPointerUp:B(c.onPointerUp,()=>{y.current==="mouse"&&E()}),onPointerDown:B(c.onPointerDown,h=>{y.current=h.pointerType}),onPointerMove:B(c.onPointerMove,h=>{y.current=h.pointerType,r?d.onItemLeave?.():y.current==="mouse"&&h.currentTarget.focus({preventScroll:!0})}),onPointerLeave:B(c.onPointerLeave,h=>{h.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:B(c.onKeyDown,h=>{d.searchRef?.current!==""&&h.key===" "||(Uo.includes(h.key)&&E(),h.key===" "&&h.preventDefault())})})})})});yt.displayName=ge;var he="SelectItemText",It=a.forwardRef((t,s)=>{const{__scopeSelect:n,className:i,style:r,...u}=t,c=re(he,n),l=ae(he,n),d=wt(he,n),f=$o(he,n),[S,N]=a.useState(null),k=te(s,E=>N(E),d.onItemTextChange,E=>l.itemTextRefCallback?.(E,d.value,d.disabled)),D=S?.textContent,R=a.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:D},d.value),[d.disabled,d.value,D]),{onNativeOptionAdd:m,onNativeOptionRemove:y}=f;return se(()=>(m(R),()=>y(R)),[m,y,R]),e.jsxs(e.Fragment,{children:[e.jsx(H.span,{id:d.textId,...u,ref:k}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Ke.createPortal(u.children,c.valueNode):null]})});It.displayName=he;var Ct="SelectItemIndicator",bt=a.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t;return wt(Ct,n).isSelected?e.jsx(H.span,{"aria-hidden":!0,...i,ref:s}):null});bt.displayName=Ct;var _e="SelectScrollUpButton",Nt=a.forwardRef((t,s)=>{const n=ae(_e,t.__scopeSelect),i=De(_e,t.__scopeSelect),[r,u]=a.useState(!1),c=te(s,i.onScrollButtonChange);return se(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollTop>0;u(f)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?e.jsx(At,{...t,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});Nt.displayName=_e;var Re="SelectScrollDownButton",jt=a.forwardRef((t,s)=>{const n=ae(Re,t.__scopeSelect),i=De(Re,t.__scopeSelect),[r,u]=a.useState(!1),c=te(s,i.onScrollButtonChange);return se(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollHeight-d.clientHeight,S=Math.ceil(d.scrollTop)<f;u(S)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?e.jsx(At,{...t,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});jt.displayName=Re;var At=a.forwardRef((t,s)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,u=ae("SelectScrollButton",n),c=a.useRef(null),l=Se(n),d=a.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return a.useEffect(()=>()=>d(),[d]),se(()=>{l().find(S=>S.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),e.jsx(H.div,{"aria-hidden":!0,...r,ref:s,style:{flexShrink:0,...r.style},onPointerDown:B(r.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(i,50))}),onPointerMove:B(r.onPointerMove,()=>{u.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(i,50))}),onPointerLeave:B(r.onPointerLeave,()=>{d()})})}),an="SelectSeparator",ln=a.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t;return e.jsx(H.div,{"aria-hidden":!0,...i,ref:s})});ln.displayName=an;var Pe="SelectArrow",cn=a.forwardRef((t,s)=>{const{__scopeSelect:n,...i}=t,r=we(n),u=re(Pe,n),c=ae(Pe,n);return u.open&&c.position==="popper"?e.jsx(lo,{...r,...i,ref:s}):null});cn.displayName=Pe;var dn="SelectBubbleInput",Et=a.forwardRef(({__scopeSelect:t,value:s,...n},i)=>{const r=a.useRef(null),u=te(i,r),c=co(s);return a.useEffect(()=>{const l=r.current;if(!l)return;const d=window.HTMLSelectElement.prototype,S=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==s&&S){const N=new Event("change",{bubbles:!0});S.call(l,s),l.dispatchEvent(N)}},[c,s]),e.jsx(H.select,{...n,style:{...rt,...n.style},ref:u,defaultValue:s})});Et.displayName=dn;function Tt(t){return t===""||t===void 0}function _t(t){const s=to(t),n=a.useRef(""),i=a.useRef(0),r=a.useCallback(c=>{const l=n.current+c;s(l),(function d(f){n.current=f,window.clearTimeout(i.current),f!==""&&(i.current=window.setTimeout(()=>d(""),1e3))})(l)},[s]),u=a.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return a.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,u]}function Rt(t,s,n){const r=s.length>1&&Array.from(s).every(f=>f===s[0])?s[0]:s,u=n?t.indexOf(n):-1;let c=un(t,Math.max(u,0));r.length===1&&(c=c.filter(f=>f!==n));const d=c.find(f=>f.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==n?d:void 0}function un(t,s){return t.map((n,i)=>t[(s+i)%t.length])}var pn=at,fn=lt,mn=dt,hn=ut,xn=pt,gn=ft,vn=gt,Sn=yt,wn=It,yn=bt,In=Nt,Cn=jt;function Pt({...t}){return e.jsx(pn,{"data-slot":"select",...t})}function Ot({...t}){return e.jsx(mn,{"data-slot":"select-value",...t})}function Dt({className:t,size:s="default",children:n,...i}){return e.jsxs(fn,{"data-slot":"select-trigger","data-size":s,className:pe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[n,e.jsx(hn,{asChild:!0,children:e.jsx(st,{className:"size-4 opacity-50"})})]})}function kt({className:t,children:s,position:n="popper",align:i="center",...r}){return e.jsx(xn,{children:e.jsxs(gn,{"data-slot":"select-content",className:pe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,align:i,...r,children:[e.jsx(bn,{}),e.jsx(vn,{className:pe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(Nn,{})]})})}function Lt({className:t,children:s,...n}){return e.jsxs(Sn,{"data-slot":"select-item",className:pe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(yn,{children:e.jsx(uo,{className:"size-4"})})}),e.jsx(wn,{children:s})]})}function bn({className:t,...s}){return e.jsx(In,{"data-slot":"select-scroll-up-button",className:pe("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(po,{className:"size-4"})})}function Nn({className:t,...s}){return e.jsx(Cn,{"data-slot":"select-scroll-down-button",className:pe("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(st,{className:"size-4"})})}function jn({close:t,open:s,data:n,onChange:i,type:r}){const u=qe(),{handleSubmit:c,reset:l,control:d}=u;function f({reason:S}){i(S),l(),t()}return e.jsx(Je,{open:s,onOpenChange:S=>!S&&t(),children:e.jsxs(Qe,{className:"w-full",children:[e.jsx($t,{children:e.jsxs(qt,{className:"text-center text-2xl font-bold text-primary",children:[r===0&&"Pausando o atendimento",r===1&&"Retomando o atendimento"]})}),e.jsx(Ye,{...u,children:e.jsxs("form",{className:"flex flex-col gap-4 w-full",onSubmit:c(f),children:[e.jsx(Ze,{control:d,name:"reason",rules:{required:"Campo obrigatório"},render:({field:S})=>e.jsxs(Xe,{children:[e.jsx(et,{children:"Selecione o motivo"}),e.jsxs(Pt,{onValueChange:S.onChange,defaultValue:S.value,children:[e.jsx(tt,{className:"w-full",children:e.jsx(Dt,{children:e.jsx(Ot,{placeholder:"Selecione uma opção"})})}),e.jsx(kt,{children:n?.map(N=>e.jsx(Lt,{value:N.GMI_ID.toString(),children:N.GMI_DESCRICAO},N.GMI_ID))})]}),e.jsx(ot,{})]})}),e.jsxs("div",{className:"flex flex-col items-center justify-between gap-2 pt-4",children:[e.jsxs(je,{onClick:t,type:"button",variant:"destructive",className:"w-full",children:[e.jsx($e,{size:20}),"Fechar"]}),e.jsxs(je,{type:"submit",className:"w-full py-5",children:[e.jsx(Ae,{size:20}),"Salvar"]})]})]})})]})})}function ts(){const[t,s]=a.useState(null),[n,i]=a.useState({open:!1,type:0}),[r,u]=a.useState(!1),[c,l]=a.useState(!1),{stopWatch:d,interruptForced:f}=Wt(t,{onForcedBreakStart:async()=>{await z(1,!0,!0)},onWarningEnd:async()=>{await z(1,!1,!1)},onForcedBreakEnd:async()=>{if(await z(10,!1,!1),t){if(t.status=2,!t.startAttendances){const{latitude:o,longitude:p}=await ue(),g=Ue(new Date),I=await vo(t,t?.GAA_ID,o,p,g);I&&I.sucessStarted&&Object.assign(t,I)}await ee(t),s({...t})}}}),[,S,N]=wo("currentCustomer"),k=qe(),{control:D,handleSubmit:R,setValue:m,getValues:y}=k,E=Bt(),{showLoading:h,hideLoading:v}=Vt();async function Q(o,p){try{if(!await xe({title:"ATENDER",component:e.jsxs("div",{className:"text-primary flex flex-col items-start gap-2 px-2",children:[e.jsxs("span",{children:["Você está prestes a ",e.jsx("strong",{children:"INICIAR"})," o atendimento em"," ",e.jsxs("strong",{className:"text-primary font-extrabold",children:[o.CLI_NOME_FANTASIA," "]})]}),e.jsxs("div",{className:"border-l-primary border-primary-50 shadow-primary-50 flex w-full flex-col gap-2 rounded-xl border border-l-4 px-2 py-4 shadow-sm",children:[e.jsx("span",{className:"font-normal",children:"CLIENTE"}),e.jsx("span",{className:"font-extrabold",children:`${o.CLI_NOME_FANTASIA?.toUpperCase()}`})]})]}),confirm:"Iniciar atendimento"}))return;h("Iniciando atendimento");const{latitude:I,longitude:C,error:_}=await ue();if(!I||!C){W(_||"Não foi possível buscar a localização atual, tente novamente"),v();return}if(ne(t))W("O horário de expediente chegou ao fim!");else{let A;p&&(A=await be());for(const b of t.CLIENTES)if(b.SEQ_PADRAO===o.SEQ_PADRAO){const x=t?.HORARIOS_TRABALHO?.RAIO_ATENDIMENTO<=0?!1:await fo(b,t,I,C);if(x){const w=[];for(const P of x){const j={};j.descricao=P.GTI_DESCRICAO,j.galId=P.GAL_ID,j.liberado=P.GTI_FLG_IMPEDE_ATD!==1,j.lido=P.GAL_FLG_STATUS===1,j.DISTANCE=P.DISTANCE,j.distanceNumber=P.distanceNumber,w.push(j)}b.alert=w,b.galId=w.find(P=>P.liberado===!1)?.galId,await ee(t),s(t);return}else{const w=[{descricao:null,galId:null,liberado:!0,lido:null}];b.alert=w,b.galId=!1}if(F(b.checkIn)||(b.checkIn=[]),b.status===0||b.status===void 0||b.status===2){const w={};w.start=new Date,w.status=1,w.latitudeCheckIn=I,w.longitudeCheckIn=C,b.checkIn.push(w),b.status=1,b.lastCheckIn=w.start,b.lastCheckout=void 0}}if(t.emAtendimento=!0,t.cliAtendimento=o.SEQ_PADRAO,t.CLI_IN_PROGRESS=o.CLI_ID,t.status=2,await ee(t),s(t),p){if(!await mo(t)){await ee(A),s(A),W(`Não foi possível iniciar o atendimento.
Verifique sua conexão com a internet e se seu GPS está ativo.`),v();return}v()}t.cliAtendimento=o.SEQ_PADRAO,t.CLI_IN_PROGRESS=o.CLI_ID,await ee(t),S(o),E("/pesquisas-service")}}catch{W("Não foi possível iniciar o atendimento")}finally{v()}}function U(o){S(o),E("/pesquisas-service")}function ne(o){try{const p=o.CLIENTES.find(g=>g.status===1);if(o&&o.HORARIOS_TRABALHO&&Object.keys(o.HORARIOS_TRABALHO).length!==0){const g=new Date;if(o.HORARIOS_TRABALHO?.FIM_JORNADA!==null){const C=o.HORARIOS_TRABALHO?.FIM_JORNADA?.split(":",3);g.setHours(C[0],C[1],C[2]||0)}const I=So(new Date,g);return I>0?(u(!0),!0):I<=0||p?(u(!1),!1):(u(!0),!0)}}catch{return u(!1),!1}}async function V(o){const p=t.CLIENTES.find(A=>A.SEQ_PADRAO===o.SEQ_PADRAO),g=t.CLIENTES.findIndex(A=>A.SEQ_PADRAO===p.SEQ_PADRAO),I=t.CLIENTES[g]?.alert?.findIndex(A=>A.liberado===!1);h("Verificando liberação");const{latitude:C,longitude:_}=await ue();if(p.CLI_LATITUDE!==null&&p.CLI_LONGITUDE!==null&&p.status!==1&&p.galId!==!1&&C&&_){let A=await ho(p.CLI_LATITUDE,p.CLI_LONGITUDE,C,_,"K");A=A*1e3;const b=t.HORARIOS_TRABALHO.RAIO_ATENDIMENTO,X=A>1e3?`${parseFloat(ze(A/1e3))}km`:`${parseFloat(ze(A))}m`;if(A<=b){const x={pos:g,status:1};await Y(t?.CLIENTES[g]?.alert[I]?.galId),await G(x),W("Atendimento liberado",1),v();return}else typeof g=="number"&&g!==-1&&typeof I=="number"&&I!==-1&&(t.CLIENTES[g].alert[I].DISTANCE=X,await ee(t),s(t))}const T=await xo(p,t,1);await G(T),v()}async function G(o){if(o){if(o.status===1&&o!==!1){const p=t.CLIENTES[o.pos].alert.findIndex(g=>g.liberado===!1);t.CLIENTES[o.pos].alert[p].liberado=!0,t.CLIENTES[o.pos].alert[p].lido=!0,t.CLIENTES[o.pos].alert[p].observation=`Liberado ${He(new Date)}`,t.CLIENTES[o.pos].galId=!1,W("Atendimento liberado",1),await ee(t),s(t)}else if(o.status===-1&&o!==!1){const p=t.CLIENTES[o.pos].alert.findIndex(g=>g.liberado===!1);t.CLIENTES[o.pos].alert[p].liberado=-1,t.CLIENTES[o.pos].alert[p].lido=!0,t.CLIENTES[o.pos].alert[p].observation=`Não foi liberado ${He(new Date)}`,t.CLIENTES[o.pos].galId=-1,await ee(t),s(t)}}}async function Y(o){try{const p=ke();if(p){const g=p.empresaId,I=p.codigoUsuario,C={};C.galId=o,C.liberado=!0,C.lido=!0,await Ut.put(`v1/tradedashboard/alerts/${g}/${I}`,C)}}catch{}}async function oe(){if(t?.CLIENTES.find(w=>w.checkIn===void 0&&w.motivoNaoAtendimento===void 0)){W("Justifique os clientes não atendidos");return}if(!await xe({title:"Finalizar",message:"Tem certeza que deseja finalizar esse atendimento?"}))return;const{latitude:p,longitude:g,error:I}=await ue();if(!p||!g){W(I||"Não foi possível buscar a localização atual, tente novamente"),v();return}const C=ke();if(!C){W("Não foi possível buscar a sessão, tente novamente"),v();return}const _=C.gmovelHodometro,T=await Gt("currentDrivenOdometro"),A=Ge(new Date,"dd/MM/yyyy"),b=T?.GKM_KM_INICIAL_DATA?Ge(new Date(T?.GKM_KM_INICIAL_DATA),"dd/MM/yyyy"):null;if(_&&!T&&!T?.GKM_KM_FINAL&&!T?.GKM_KM_FINAL_FOTO&&b&&A!==b){W("Para finalizar o dia, é necessário informar o KM final, e a foto"),v();return}h("Finalizando o dia");const X=Ue(new Date),x=await go(t,t?.GAA_ID,p,g,X,h);v(),x&&E("/")}async function K({reason:o}){l(!1);const p=y("customer");if(!await xe({title:"Confirmar ação de não atender?",message:"Tem certeza que deseja confirmar a ação de não atender?"})){l(!0);return}const I=await be(),C=t.TIPOS_JUSTIFICATIVA.find(T=>T.GAJ_ID===parseInt(o));for(const T of t.CLIENTES)T.SEQ_PADRAO===p&&(T.motivoNaoAtendimento=C.GAJ_DESCRICAO);h("Sincronizando"),await Ve(t,!1,h)?(await ee(t),s(t)):(s(I),W(`Não foi possível justificar o não atendimento.
Verifique sua conexão com a internet e se seu GPS está ativo.`),l(!0)),v()}async function z(o,p,g){const{latitude:I,longitude:C}=await ue();let _,T;if(p?T=p:(h("Atualizando status"),g?(T=o,await Z(),i({open:!1,type:0})):(T=o,await $(),i({open:!1,type:-1}))),F(T))_=t.TIPOS_INTERRUPCAO.find(A=>A.GMI_ID===parseInt(T));else{W("A justificativa é obrigatória");return}t.interrupts===void 0&&(t.interrupts=[]),_&&(_.latitude=I,_.longitude=C,_.dataHora=new Date),t.interrupts.push(_),t.status=g?-1:2,await ee(t),s(t),v()}async function Z(){t.status=-1,await Fe(t.GAA_ID,-1)}async function $(){t.status=2,await Fe(t.GAA_ID,2)}async function q(o,p){const{latitude:g,longitude:I}=await ue();if(g&&I){const C={latitude:g,longitude:I},_={latitude:o,longitude:p};window.open(`https://www.google.com/maps/dir/?api=1&origin=${C.latitude},${C.longitude}&destination=${_.latitude},${_.longitude}`,"Rota Cliente")}}const M=a.useRef(!1);return a.useEffect(()=>{(async function(){if(N(),M.current)return;const p=await be();p&&(M.current=!0,s(p),ne(p))})()},[]),e.jsxs(e.Fragment,{children:[e.jsx(Ft,{title:"Atendimentos",showBackButton:!0,backPath:"/"}),e.jsxs("div",{className:"h-full background-pages flex flex-col lg:pt-16",children:[e.jsx("header",{className:"bg-primary/95 backdrop-blur-xl p-4 shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[f!==2&&!r&&e.jsxs("button",{onClick:()=>{t?.status===2?i({open:!0,type:0}):i({open:!0,type:1})},className:Ne("inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 backdrop-blur-xs text-white text-sm border border-white/50",t?.status===-1&&"bg-white text-primary"),children:[e.jsx(bo,{size:18}),e.jsxs("span",{className:"font-medium",children:[t?.status===-1&&"Retomar",t?.status===2&&"Pausar"]})]}),e.jsxs("span",{className:"ml-2 px-3 py-2 bg-white/15 rounded-full backdrop-blur-xs text-white text-sm border border-white/30",children:[t?.CLIENTES?.length||0," clientes"]})]})}),e.jsxs("main",{className:"flex-1 overflow-y-auto px-2 py-6 pb-20",children:[e.jsx(Kt,{stopWatch:d,interruptForced:f}),r&&e.jsx("div",{className:"w-full -mt-4 mb-4 overflow-hidden rounded-xl border border-red-900/30 bg-red-950 shadow-lg max-w-2xl mx-auto",children:e.jsxs("div",{className:"flex items-start gap-3 p-4",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-red-900 text-red-300",children:e.jsx("i",{children:e.jsx(yo,{size:20})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-sm font-semibold text-red-50",children:"Horário de Atendimento Encerrado"}),e.jsx("p",{className:"text-xs text-red-100",children:"O expediente de hoje foi finalizado"})]})]})}),e.jsx("div",{className:"space-y-4 max-w-2xl mx-auto",children:t?.CLIENTES?.map(o=>{const p=o?.pesquisas?.length||0,g=o.status===2&&o.checkIn!==void 0&&F(o.checkIn),I=t?.status!==-1&&o.status!==1&&!F(o.motivoNaoAtendimento)&&!o.galId&&!r&&!t.emAtendimento,C=t?.status!==-1&&o.status!==1&&!F(o.motivoNaoAtendimento)&&o.galId!==-1&&!r&&o?.alert&&o?.alert.length>0&&o?.alert?.some(b=>!b.liberado),_=t?.status!==-1&&o.checkIn===void 0&&!F(o.motivoNaoAtendimento)&&o.galId!==-1&&!t.emAtendimento,T=o.galId!==-1&&!r&&o.status===1&&t.status!==-1,A=I||C||_||T;return e.jsxs("div",{className:Ne("bg-white/95 backdrop-blur-md rounded-3xl shadow-xl overflow-hidden border border-white/30",o.checkIn!==void 0&&o.status===1&&"border-blue-600/70",F(o.motivoNaoAtendimento)&&"border-red-600/70"),children:[e.jsx("div",{className:"p-5 bg-linear-to-r from-white to-primary/15",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:Ne("w-16 h-16 rounded-2xl bg-linear-to-br from-primary/70 via-primary to-primary/70 flex items-center justify-center shrink-0",o.checkIn!==void 0&&o.status===1&&"from-blue-700 via-blue-600 to-blue-700",F(o.motivoNaoAtendimento)&&"from-red-400 via-red-700 to-red-400",g&&"from-green-600 via-green-700 to-green-600"),children:[g&&e.jsx(zt,{size:28,className:"text-white"}),o.status===1&&e.jsx(Eo,{size:28,className:"text-white"}),F(o.motivoNaoAtendimento)&&e.jsx(Ht,{size:28,className:"text-white"}),!F(o.checkIn)&&!F(o.motivoNaoAtendimento)&&e.jsx(Io,{size:28,className:"text-white"})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"flex items-start justify-between gap-2 mb-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"inline-block px-2 py-0.5 bg-primary text-white text-xs rounded-full",children:["#",o.CLI_CODIGO]}),o.galId!==-1&&!r&&o.status===1&&t.status!==-1&&!F(o.motivoNaoAtendimento)&&e.jsx("span",{className:"inline-block px-2 py-0.5 bg-blue-700 text-white text-xs rounded-full",children:"Em atendimento"}),F(o.motivoNaoAtendimento)&&e.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-600 text-white text-xs rounded-full",children:"Não atendido"}),g&&e.jsx("span",{className:"inline-block px-2 py-0.5 bg-green-700 text-white text-xs rounded-full",children:"Atendido"})]}),e.jsx("h3",{className:"text-primary text-lg font-black -mt-1",children:o.CLI_NOME_FANTASIA}),e.jsx("p",{className:"text-sm text-primary -mt-1",children:o.CLI_RAZAO_SOCIAL}),e.jsxs("p",{className:"text-sm font-medium text-blue-700 -mt-1",children:[p," pesquisas"]})]})})})]})}),o.alert&&o.galId!==-1&&o.galId!==!1&&!r&&e.jsx("div",{className:"px-5 py-4 bg-red-50 border-y border-red-200/80",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("i",{children:e.jsx(_o,{size:20,className:"text-red-600 shrink-0 mt-0.5"})}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("p",{className:"text-red-800 font-bold mb-1 text-base",children:"Atendimento bloqueado"}),e.jsx("p",{className:"text-red-700 text-[15px]",children:o.alert.find(b=>b.liberado===!1)?.descricao}),e.jsxs("p",{className:"text-red-700 text-[15px] mt-1",children:["Distância:"," ",o.alert.find(b=>b.liberado===!1)?.DISTANCE]})]})]})}),F(o.CLI_LATITUDE)&&F(o.CLI_LONGITUDE)&&!r&&e.jsx("div",{className:"px-5 py-2 bg-linear-to-r from-white to-primary/15 border-y border-primary/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{children:e.jsx(Me,{size:18,className:"text-primary shrink-0"})}),e.jsx("div",{className:"flex-1 text-sm",children:e.jsx("p",{className:"text-primary/95",children:"Localização disponível"})}),e.jsxs("button",{onClick:()=>q(o.CLI_LATITUDE,o.CLI_LONGITUDE),className:"px-4 py-2 bg-white rounded-xl text-sm text-primary flex items-center gap-1 shadow-sm border border-primary/20",children:[e.jsx(Me,{size:14}),e.jsx("span",{children:"Rota"})]})]})}),F(o.motivoNaoAtendimento)&&e.jsx("div",{className:"px-5 py-3 bg-red-50 border-y border-red-200",children:e.jsxs("p",{className:"text-center text-sm font-medium text-red-700",children:["NÃO ATENDIDO (",o.motivoNaoAtendimento,")"]})}),e.jsxs("div",{className:`flex gap-3 flex-wrap ${A?"p-3":"py-0"}`,children:[I&&e.jsxs("button",{onClick:()=>Q(o,!0),className:"flex-1 flex items-center justify-center gap-2 py-3.5 px-4 rounded-xl bg-primary text-white active:scale-[0.97]",children:[e.jsx(Be,{size:20}),e.jsx("span",{children:"Atender"})]}),C&&e.jsxs("button",{onClick:async()=>await V(o),className:"flex-1 flex items-center justify-center gap-2 py-3.5 px-4 rounded-xl bg-linear-to-r from-primary/85 to-primary text-white hover:shadow-xl transition-all active:scale-[0.97] group",children:[e.jsx(Po,{size:20,className:"group-hover:scale-110 transition-transform"}),e.jsx("span",{children:"Verificar"})]}),_&&e.jsxs("button",{onClick:()=>{l(!0),m("customer",o.SEQ_PADRAO)},className:"flex-1 flex items-center justify-center gap-2 py-3.5 px-4 rounded-xl border-2 border-red-300 bg-red-600 text-white active:scale-[0.97]",children:[e.jsx($e,{size:20}),e.jsx("span",{children:"Não atender"})]}),T&&e.jsxs("button",{onClick:()=>U(o),className:"flex-1 flex items-center justify-center gap-2 py-3.5 px-4 rounded-xl bg-blue-700 text-white active:scale-[0.97]",children:[e.jsx(Be,{size:20}),e.jsx("span",{children:"Continuar"})]})]})]},o.SEQ_PADRAO)})})]}),e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 bg-white/10 backdrop-blur-xl border-t border-white/20 px-4 py-2",children:e.jsxs("div",{className:"flex gap-3 max-w-2xl mx-auto",children:[!r&&e.jsxs("button",{onClick:async()=>{await xe({title:"Sincronizar",message:"Deseja sincronizar os dados? Este processo pode levar alguns minutos e necessita de conexão com a internet"})&&(h("Sincronizando"),await Ve(t,!1,h),v())},className:"flex-1 flex items-center justify-center gap-2 py-4 px-4 rounded-2xl bg-primary text-white",children:[e.jsx(jo,{size:20}),e.jsx("span",{children:"Sincronizar"})]}),t?.status!==-1&&e.jsxs("button",{onClick:oe,className:"flex-1 flex items-center justify-center gap-2 py-4 px-4 rounded-2xl bg-white text-primary",children:[e.jsx(Ae,{size:20}),e.jsx("span",{children:"Finalizar"})]})]})}),e.jsx(Je,{open:c,onOpenChange:()=>l(!1),children:e.jsx(Qe,{children:e.jsxs(Ye,{...k,children:[e.jsx("div",{className:"my-4 flex w-full items-center justify-center border-b border-border",children:e.jsx("span",{className:"text-center text-2xl font-bold text-primary",children:"Justificativa não atendimento"})}),e.jsxs("form",{className:"flex h-max w-full flex-col justify-between gap-4",onSubmit:R(K),children:[e.jsx(Ze,{control:D,name:"reason",rules:{required:"Campo obrigatório"},render:({field:o})=>e.jsxs(Xe,{children:[e.jsx(et,{children:"Selecione o motivo"}),e.jsxs(Pt,{onValueChange:o.onChange,defaultValue:o.value,children:[e.jsx(tt,{className:"w-full",children:e.jsx(Dt,{children:e.jsx(Ot,{placeholder:"Selecione uma opção"})})}),e.jsx(kt,{children:t?.TIPOS_JUSTIFICATIVA?.map(p=>e.jsx(Lt,{value:p.GAJ_ID.toString(),children:p.GAJ_DESCRICAO},p.GAJ_ID))})]}),e.jsx(ot,{})]})}),e.jsx("div",{className:"flex-col flex w-full items-center justify-between gap-2",children:e.jsxs(je,{type:"submit",className:"mb-1 w-full",children:["Salvar ",e.jsx(Ae,{size:20})]})})]})]})})}),n.open&&e.jsx(jn,{open:n.open,type:n.type,data:n.type===0?t?.TIPOS_INTERRUPCAO.filter(o=>o.GMI_TIPO_INTERRUPCAO===0):t?.TIPOS_INTERRUPCAO.filter(o=>o.GMI_TIPO_INTERRUPCAO===1),close:()=>i({open:!1,type:-1}),onChange:o=>z(o,!1,n.type===0)})]})]})}export{ts as default};
